name: Build, Push, and Deploy

on:
  push:
    branches: ["main"]

jobs:
  call-reusable-workflow:
    # To resuse, update the github account below after forking the server-config repo
    uses: mfcarroll/gcp-server-config/.github/workflows/reusable-deploy.yml@main
    permissions:
      contents: 'read'
      id-token: 'write'
    with:
      # Add the name of your app here
      appname: template
    secrets:
      inherit